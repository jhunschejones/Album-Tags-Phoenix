var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var e=c.length;b=b||0;for(0>b&&(b=Math.max(b+e,0));b<e;b++){var f=c[b];if(f===a||Object.is(f,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).i}},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,b,d){b=null!=b?b:function(a){return a};var c=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof f){a=f.call(a);for(var g=0;!(f=a.next()).done;)c.push(b.call(d,f.value,g++))}else for(f=a.length,g=0;g<f;g++)c.push(b.call(d,a[g],g));return c}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},c=Object.create(new $jscomp.global.Proxy(a,{get:function(b,d,e){return b==a&&"q"==d&&e==c}}));return!0===c.q}catch(b){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+c++,b)}var c=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill("WeakMap",function(a){function c(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(k){return!1}}function b(){}function d(a){if(!$jscomp.owns(a,f)){var c=new b;$jscomp.defineProperty(a,f,{value:c})}}function e(a){var c=Object[a];c&&(Object[a]=function(a){if(a instanceof b)return a;d(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&
$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var g=0,h=function(a){this.id_=(g+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};h.prototype.set=function(a,b){d(a);if(!$jscomp.owns(a,f))throw Error("WeakMap key fail: "+a);a[f][this.id_]=b;return this};h.prototype.get=function(a){return $jscomp.owns(a,f)?a[f][this.id_]:void 0};h.prototype.has=
function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};h.prototype.delete=function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return h},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(l){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbolIterator();var b=new WeakMap,d=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};d.prototype.set=function(a,b){a=0===a?0:a;var c=e(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};d.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};d.prototype.has=function(a){return!!e(this,a).entry};
d.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};d.prototype.entries=function(){return f(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return f(this,function(a){return a.key})};d.prototype.values=function(){return f(this,function(a){return a.value})};d.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(a,c){var d=c&&typeof c;"object"==
d||"function"==d?b.has(c)?d=b.get(c):(d=""+ ++h,b.set(c,d)):d="p_"+c;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var f=e[a];if(c!==c&&f.key!==f.key||c===f.key)return{id:d,list:e,index:a,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},f=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=
a.next=a.head=a},h=0;return d},"es6","es3");
$jscomp.polyfill("Set",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([b]));if(!c.has(b)||1!=c.size||c.add(b)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var f=c.entries(),g=f.next();if(g.done||g.value[0]!=b||g.value[1]!=b)return!1;g=f.next();return g.done||g.value[0]==b||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:f.next().done}catch(h){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbolIterator();var b=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};b.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};b.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};b.prototype.clear=function(){this.map_.clear();
this.size=0};b.prototype.has=function(a){return this.map_.has(a)};b.prototype.entries=function(){return this.map_.entries()};b.prototype.values=function(){return this.map_.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.map_.forEach(function(d){return a.call(b,d,d,c)})};return b},"es6","es3");
$jscomp.polyfill("Array.prototype.flat",function(a){return a?a:function(a){a=void 0===a?1:a;for(var b=[],c=0;c<this.length;c++){var e=this[c];Array.isArray(e)&&0<a?(e=Array.prototype.flat.call(e,a-1),b.push.apply(b,e)):b.push(e)}return b}},"es9","es5");
var listPage={initializeEditListModal:function(){var a=document.getElementById("edit-list-modal");listPage.editListModal=M.Modal.init(a,{onOpenEnd:function(){var a=document.getElementById("list-name-input");a.focus();a.selectionStart=a.selectionEnd=a.value.length}})},initializeAddAlbumModal:function(){var a=document.getElementById("add-album-modal");listPage.addAlbumModal=M.Modal.init(a,{onOpenEnd:function(){document.getElementById("add-album-input").focus()}})},closeModalOnClickAway:function(a){a.target.classList.contains("modal-overlay")&&
(listPage.tagFilterModal.close(),listPage.artistFilterModal.close(),listPage.yearFilterModal.close())},closeToast:function(){var a=document.querySelector(".toast");M.Toast.getInstance(a).dismiss()},closeToastsOnClick:function(a){((a=a.target.parentNode)&&a.classList&&a.classList.contains("toast")||a&&"toast-container"==a.id)&&listPage.closeToast()},initializeMainFloatingActionButton:function(){var a=document.getElementById("lists-fab-button");listPage.mainFloatingActionButton=M.FloatingActionButton.init(a,
{direction:"top",hoverEnabled:!1})},closeFloatingActionButtonWhenClickAway:function(a){["show-buttons","add-lists","edit-lists","remove-album","filter-fab"].includes(a.target.parentNode.id)||listPage.mainFloatingActionButton.close()},showFilterMenu:function(){setTimeout(function(){document.getElementById("bottom-filters").classList.remove("hide")},150)},closeFilterMenu:function(){document.getElementById("bottom-filters").classList.add("hide")},clearAllFilters:function(){listVueApp.yearFilters=[];
listVueApp.artistFilters=[];listVueApp.tagFilters=[];listVueApp.resetSelectedAlbums();listPage.filterAll();listPage.hilightSelectedArtistFilters();listPage.hilightSelectedTagFilters();listPage.hilightSelectedYearFilters();document.getElementById("bottom-filters").classList.add("hide");M.toast({html:"All filters cleared",displayLength:2500})},initializeYearFilterModal:function(){var a=document.getElementById("year-filter-modal");listPage.yearFilterModal=M.Modal.init(a,{onCloseStart:function(){listVueApp.resetSelectedAlbums();
listPage.filterAll()}})},initializeArtistFitlerModal:function(){var a=document.getElementById("artist-filter-modal");listPage.artistFilterModal=M.Modal.init(a,{onCloseStart:function(){listVueApp.resetSelectedAlbums();listPage.filterAll()}})},initializeTagFilterModal:function(){var a=document.getElementById("tag-filter-modal");listPage.tagFilterModal=M.Modal.init(a,{onCloseStart:function(){listVueApp.resetSelectedAlbums();listPage.filterAll()}})},hideRemoveAlbumButtons:function(){listPage.showRemoveAlbum=
!1;hideClass("delete-button")},toggleRemoveAlbumButtons:function(){listPage.showRemoveAlbum?listPage.hideRemoveAlbumButtons():(listPage.showRemoveAlbum=!0,showClass("delete-button"),M.toast({html:"\n        <span>\n          Click the <i class='small material-icons' style='vertical-align:middle;'>highlight_off</i> to remove an album from the list\n        </span>\n      ",displayLength:2500}))},addAlbumToList:function(a){var c=parseInt(window.location.pathname.replace("/lists/","")),b=new XMLHttpRequest;
b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status){var a=JSON.parse(b.responseText);listVueApp.albums.push(a.added_album);listPage.showRemoveAlbum=!0;listPage.toggleRemoveAlbumButtons();setTimeout(function(){listVueApp.resetSelectedAlbums();listPage.filterAll()},5);listPage.addAlbumModal.close()}else M.toast({html:b.responseText.replace(/"/g,"")})};b.open("PATCH","/lists/"+c);b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);
b.send(JSON.stringify({action:"add_album",currentAlbum:a}))},removeAlbumFromList:function(a){if(confirm("Are you sure you want to remove the album from this list? You cannot undo this operation.")){var c=parseInt(window.location.pathname.replace("/lists/","")),b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status){var c=listVueApp.albums.findIndex(function(b){return b.id==a});listVueApp.albums.splice(c,1);setTimeout(function(){listVueApp.resetSelectedAlbums();
listPage.filterAll();0==listVueApp.selectedAlbums.length&&(listVueApp.yearFilters=[],listVueApp.artistFilters=[],listVueApp.tagFilters=[],listVueApp.resetSelectedAlbums(),listPage.filterAll())},5);M.toast({html:b.responseText.replace(/"/g,"")})}else M.toast({html:"Unable to remove album from list"})};b.open("PATCH","/lists/"+c);b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);b.send(JSON.stringify({action:"remove_album",albumID:a}))}},updateListTitle:function(){var a=
parseInt(window.location.pathname.replace("/lists/","")),c=document.getElementById("list-name-input").value.trim(),b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status){var a=JSON.parse(b.responseText);listVueApp.listTitle=a.list_title;listPage.editListModal.close();M.toast({html:a.message})}else M.toast({html:b.responseText.replace(/"/g,"")})};b.open("PATCH","/lists/"+a);b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("X-CSRF-Token",
CSRF_TOKEN);b.send(JSON.stringify({action:"update_title",newTitle:c}))},searchForAlbumsToAddToList:function(){removeSelectedElement(".album-search-album");document.getElementById("add-album-search-results").style.display="inline-flex";removeSelectedElement("#add-album-search-result-warning");listPage.showAlbumSearchSpinner();var a=document.getElementById("add-album-input").value.trim(),c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&(200<=c.status&&300>c.status?listPage.displayAlbumSearchResults(JSON.parse(c.responseText)):
(listPage.hideAlbumSearchSpinner(),console.log("error",c)))};c.open("GET","/api/apple/search/?search_string="+a+"&offset=0");c.send()},showAlbumSearchSpinner:function(){listPage.albumSearchSpinner.classList.remove("hide")},hideAlbumSearchSpinner:function(){listPage.albumSearchSpinner.classList.contains("hide")||listPage.albumSearchSpinner.classList.add("hide")},displayAlbumSearchResults:function(a){var c=document.getElementById("add-album-search-results");1>a.albums.length&&(listPage.hideAlbumSearchSpinner(),
c.appendChild(stringToNode('<div id="add-album-search-result-warning" class="center-align">\n          <em class="grey-text text-darken-1">\n            No albums match your search! Try another artist or album.\n          </em>\n        </div>')),document.getElementById("add-album-search-results").style.display="block");listPage.hideAlbumSearchSpinner();document.getElementById("add-album-search-results").style.display="inline-flex";for(var b=0;b<a.albums.length;b++){var d=a.albums[b],e=d.cover.replace("{w}",
"230").replace("{h}","230");c.appendChild(stringToNode('<div class="album-search-album" onclick="listPage.addAlbumToList('+d.appleAlbumID+')">\n          <img class="search-album-cover" src="'+e+'">\n          <p class="search-title">'+d.title+'</p>\n          <p class="search-artist grey-text text-darken-1">'+d.artist+"</p>\n        </div>"))}},selectChip:function(a){a.classList.add("light-blue");a.classList.add("accent-4");a.classList.add("white-text")},deselectChip:function(a){a.classList.remove("light-blue");
a.classList.remove("accent-4");a.classList.remove("white-text")},toggleChipSelect:function(a){a.classList.toggle("light-blue");a.classList.toggle("accent-4");a.classList.toggle("white-text")},selectYearFilter:function(a){listPage.toggleChipSelect(a.target);var c=listVueApp.yearFilters.indexOf(a.target.dataset.year);-1==c?listVueApp.yearFilters.push(a.target.dataset.year):listVueApp.yearFilters.splice(c,1)},selectArtistFilter:function(a){listPage.toggleChipSelect(a.target);var c=listVueApp.artistFilters.indexOf(a.target.dataset.artist);
-1==c?listVueApp.artistFilters.push(a.target.dataset.artist):listVueApp.artistFilters.splice(c,1)},selectTagFilter:function(a){listPage.toggleChipSelect(a.target);var c=listVueApp.tagFilters.indexOf(a.target.dataset.tag);-1==c?listVueApp.tagFilters.push(a.target.dataset.tag):listVueApp.tagFilters.splice(c,1);listVueApp.resetSelectedAlbums();listPage.filterAll();setTimeout(function(){listPage.hilightSelectedTagFilters()},10)},removeFilter:function(a){var c=a.target.dataset.filter;switch(a.target.dataset.type){case "year":a=
listVueApp.yearFilters.indexOf(c);listVueApp.yearFilters.splice(a,1);break;case "artist":a=listVueApp.artistFilters.indexOf(c);listVueApp.artistFilters.splice(a,1);break;case "tag":a=listVueApp.tagFilters.indexOf(c),listVueApp.tagFilters.splice(a,1)}listVueApp.resetSelectedAlbums();listPage.filterAll()},hilightSelectedTagFilters:function(){for(var a=document.getElementsByClassName("tag-filter"),c=listVueApp.tagFilters,b=0;b<a.length;b++){var d=a[b];c.includes(d.dataset.tag)?listPage.selectChip(d):
listPage.deselectChip(d)}},hilightSelectedArtistFilters:function(){for(var a=document.getElementsByClassName("artist-filter"),c=listVueApp.artistFilters,b=0;b<a.length;b++){var d=a[b];c.includes(d.dataset.artist)?listPage.selectChip(d):listPage.deselectChip(d)}},hilightSelectedYearFilters:function(){for(var a=document.getElementsByClassName("year-filter"),c=listVueApp.yearFilters,b=0;b<a.length;b++){var d=a[b];c.includes(d.dataset.year)?listPage.selectChip(d):listPage.deselectChip(d)}},filterYears:function(){0!==
listVueApp.yearFilters.length&&(listVueApp.selectedAlbums=listVueApp.selectedAlbums.filter(function(a){return listVueApp.yearFilters.includes(a.release_date.substr(0,4))}))},filterArtists:function(){0!==listVueApp.artistFilters.length&&(listVueApp.selectedAlbums=listVueApp.selectedAlbums.filter(function(a){return listVueApp.artistFilters.includes(a.artist)}))},filterTags:function(){0!==listVueApp.tagFilters.length&&(listVueApp.selectedAlbums=listVueApp.selectedAlbums.filter(function(a){return listVueApp.tagFilters.every(function(c){return a.tags.map(function(a){return a.text}).includes(c)})}))},
clearSpecificFilter:function(a){switch(a.target.dataset.type){case "year":listVueApp.yearFilters=[];M.toast({html:"Year filters cleared",displayLength:2500});break;case "artist":listVueApp.artistFilters=[];M.toast({html:"Artist filters cleared",displayLength:2500});break;case "tag":listVueApp.tagFilters=[],M.toast({html:"Tag filters cleared",displayLength:2500})}listVueApp.resetSelectedAlbums();listPage.filterAll();listPage.hilightSelectedArtistFilters();listPage.hilightSelectedTagFilters();listPage.hilightSelectedYearFilters()},
filterAll:function(){listPage.filterYears();listPage.filterArtists();listPage.filterTags();listPage.hideRemoveAlbumButtons()},setURIparams:function(a,c){var b=new URL(document.location);if(0===c.length)return b.searchParams.delete(a),history.replaceState({},"",b);c=encodeURIComponent(c.join(",,"));b.searchParams.set(a,c);history.replaceState({},"",b)},getURIparam:function(a){return(a=(new URL(document.location)).searchParams.get(a))?decodeURIComponent(a).split(",,"):[]},addNoAlbumMessage:function(){document.getElementById("list-container").parentNode.appendChild(stringToNode('<div id="no-albums-message" class="center-align" style="padding:40px 15px">\n        <em class="grey-text">Looks like you haven\'t added any albums to this list! Click the floating action button in the bottom right corner of the screen to add an album.</em>\n      </div>'))},
removeNoAlbumsMessage:function(){removeSelectedElement("#no-albums-message")}},listVueApp=new Vue({el:"#listVueApp",data:{albums:allAlbums,selectedAlbums:[],listUserID:listUserID,yearFilters:[],artistFilters:[],tagFilters:[],listTitle:listTitle,titleTags:tagSearchTags},methods:{albumCover:function(a,c){return a.cover.replace("{w}",c).replace("{h}",c)},removeAlbum:function(a){listPage.removeAlbumFromList(a)},resetSelectedAlbums:function(){var a=this,c=JSON.parse(JSON.stringify(this.albums));if(listUserID)for(var b=
0;b<c.length;b++){var d=c[b];d.tags=d.tags.filter(function(b){return b.user_id==a.listUserID})}this.selectedAlbums=c.sort(function(a,b){return a.release_date<b.release_date?1:a.release_date>b.release_date?-1:0})}},computed:{selectedAlbumsCount:function(){return this.selectedAlbums.length},artists:function(){return Array.from(new Set(this.selectedAlbums.slice().map(function(a){return a.artist}).sort(function(a,c){a=a.toUpperCase();c=c.toUpperCase();return a<c?-1:a>c?1:0})))},years:function(){return Array.from(new Set(this.selectedAlbums.slice().map(function(a){return a.release_date.substr(0,
4)})))},tags:function(){return Array.from(new Set(this.selectedAlbums.slice().map(function(a){return a.tags.map(function(a){return a.text})}).flat().sort()))},allFilters:function(){return this.yearFilters.concat(this.artistFilters).concat(this.tagFilters)}},watch:{albums:function(){0===this.albums.length?listPage.addNoAlbumMessage():listPage.removeNoAlbumsMessage();this.resetSelectedAlbums()},yearFilters:function(a){listPage.setURIparams("years",a)},tagFilters:function(a){listPage.setURIparams("tags",
a)},artistFilters:function(a){listPage.setURIparams("artists",a)}},beforeMount:function(){this.resetSelectedAlbums()},mounted:function(){var a=document.getElementById("htm-title");a.parentNode.removeChild(a);this.artistFilters=listPage.getURIparam("artists");this.yearFilters=listPage.getURIparam("years");this.tagFilters=listPage.getURIparam("tags");document.addEventListener("DOMContentLoaded",listPage.filterAll);0===this.albums.length&&listPage.addNoAlbumMessage()}});
document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("remove-album")){var a=document.getElementById("edit-list"),c=document.getElementById("add-album"),b=document.getElementById("remove-album"),d=document.getElementById("clear-list-name-input-btn"),e=document.getElementById("clear-add-album-input-btn"),f=document.getElementById("list-name-input"),g=document.getElementById("add-album-input");listPage.listNameInput=document.getElementById("list-name-input");listPage.albumInput=
document.getElementById("add-album-input");listPage.albumSearchSpinner=document.getElementById("add-album-search-spinner-container");listPage.initializeEditListModal();listPage.initializeAddAlbumModal();b.addEventListener("click",listPage.toggleRemoveAlbumButtons);a.addEventListener("click",function(){listPage.editListModal.open()});c.addEventListener("click",function(){listPage.addAlbumModal.open()});d.addEventListener("click",function(){listNameInput.value="";listNameInput.focus()});e.addEventListener("click",
function(){listPage.albumInput.value="";listPage.albumInput.focus()});f.addEventListener("keyup",function(a){13===a.keyCode&&listPage.updateListTitle()});g.addEventListener("keydown",function(a){13==a.keyCode&&listPage.searchForAlbumsToAddToList()})}a=document.getElementById("show-filters");c=document.getElementById("close-filter-menu");b=document.getElementById("clear-all-filters");d=document.getElementById("open-sidenav");e=document.getElementById("year-filter-btn");f=document.getElementById("artist-filter-btn");
g=document.getElementById("tag-filter-btn");listPage.showRemoveAlbum=!1;listPage.initializeMainFloatingActionButton();listPage.initializeYearFilterModal();listPage.initializeArtistFitlerModal();listPage.initializeTagFilterModal();a.addEventListener("click",listPage.showFilterMenu);c.addEventListener("click",listPage.closeFilterMenu);b.addEventListener("click",listPage.clearAllFilters);d.addEventListener("click",listPage.closeFilterMenu);e.addEventListener("click",function(){listPage.hilightSelectedYearFilters();
listPage.yearFilterModal.open()});f.addEventListener("click",function(){listPage.hilightSelectedArtistFilters();listPage.artistFilterModal.open()});g.addEventListener("click",function(){listPage.hilightSelectedTagFilters();listPage.tagFilterModal.open()});document.addEventListener("click",function(a){listPage.closeToastsOnClick(a)});document.addEventListener("click",function(a){a.target.parentNode&&listPage.closeFloatingActionButtonWhenClickAway(a)},{passive:!0});document.addEventListener("scroll",
function(){setTimeout(function(){listPage.closeFilterMenu()},50)},{passive:!0});document.addEventListener("click",function(a){listPage.closeModalOnClickAway(a)},{passive:!0});addEventListenerToClass("clear-filters","click",function(a){listPage.clearSpecificFilter(a)});addEventListenerToClass("filter-btn","click",function(a){listPage.yearFilterModal.close();listPage.artistFilterModal.close();listPage.tagFilterModal.close()})});
function showClass(a){a=document.getElementsByClassName(a);for(var c=0;c<a.length;c++)a[c].classList.remove("hide")}function hideClass(a){a=document.getElementsByClassName(a);for(var c=0;c<a.length;c++)a[c].classList.add("hide")}function addEventListenerToClass(a,c,b){a=document.getElementsByClassName(a);for(var d=0;d<a.length;d++)a[d].addEventListener(c,b)};
