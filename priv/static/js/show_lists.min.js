var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var m=0;m<e.length-1;m++){var l=e[m];if(!(l in d))return;d=d[l]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var m=d[c];if(m===b||Object.is(m,b))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var m=a[e];if(b.call(c,m,e,a))return{i:e,v:m}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).i}},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(n){return n};var e=[],m="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof m){b=m.call(b);for(var l=0;!(m=b.next()).done;)e.push(c.call(d,m.value,l++))}else for(m=b.length,l=0;l<m;l++)e.push(c.call(d,b[l],l));return e}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(e,m){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:m})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(e||"")+"_"+c++,e)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var f=Object.seal({}),h=Object.seal({}),k=new a([[f,2],[h,3]]);if(2!=k.get(f)||3!=k.get(h))return!1;k.delete(f);k.set(h,4);return!k.has(f)&&4==k.get(h)}catch(p){return!1}}function c(){}function d(f){var h=typeof f;return"object"===h&&null!==f||"function"===h}function e(f){if(!$jscomp.owns(f,l)){var h=new c;$jscomp.defineProperty(f,l,{value:h})}}function m(f){if(!$jscomp.ISOLATE_POLYFILLS){var h=Object[f];h&&(Object[f]=
function(k){if(k instanceof c)return k;Object.isExtensible(k)&&e(k);return h(k)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var l="$jscomp_hidden_"+Math.random();m("freeze");m("preventExtensions");m("seal");var n=0,g=function(f){this.id_=(n+=Math.random()+1).toString();if(f){f=$jscomp.makeIterator(f);for(var h;!(h=f.next()).done;)h=h.value,this.set(h[0],h[1])}};g.prototype.set=function(f,h){if(!d(f))throw Error("Invalid WeakMap key");
e(f);if(!$jscomp.owns(f,l))throw Error("WeakMap key fail: "+f);f[l][this.id_]=h;return this};g.prototype.get=function(f){return d(f)&&$jscomp.owns(f,l)?f[l][this.id_]:void 0};g.prototype.has=function(f){return d(f)&&$jscomp.owns(f,l)&&$jscomp.owns(f[l],this.id_)};g.prototype.delete=function(f){return d(f)&&$jscomp.owns(f,l)&&$jscomp.owns(f[l],this.id_)?delete f[l][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),f=new a($jscomp.makeIterator([[g,"s"]]));if("s"!=f.get(g)||1!=f.size||f.get({x:4})||f.set({x:4},"t")!=f||2!=f.size)return!1;var h=f.entries(),k=h.next();if(k.done||k.value[0]!=g||"s"!=k.value[1])return!1;k=h.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!h.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=new WeakMap,d=function(g){this.data_={};this.head_=l();this.size=0;if(g){g=$jscomp.makeIterator(g);for(var f;!(f=g.next()).done;)f=f.value,this.set(f[0],f[1])}};d.prototype.set=function(g,f){g=0===g?0:g;var h=e(this,g);h.list||(h.list=this.data_[h.id]=[]);h.entry?h.entry.value=f:(h.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:g,value:f},h.list.push(h.entry),
this.head_.previous.next=h.entry,this.head_.previous=h.entry,this.size++);return this};d.prototype.delete=function(g){g=e(this,g);return g.entry&&g.list?(g.list.splice(g.index,1),g.list.length||delete this.data_[g.id],g.entry.previous.next=g.entry.next,g.entry.next.previous=g.entry.previous,g.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=l();this.size=0};d.prototype.has=function(g){return!!e(this,g).entry};d.prototype.get=function(g){return(g=
e(this,g).entry)&&g.value};d.prototype.entries=function(){return m(this,function(g){return[g.key,g.value]})};d.prototype.keys=function(){return m(this,function(g){return g.key})};d.prototype.values=function(){return m(this,function(g){return g.value})};d.prototype.forEach=function(g,f){for(var h=this.entries(),k;!(k=h.next()).done;)k=k.value,g.call(f,k[1],k[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(g,f){var h=f&&typeof f;"object"==h||"function"==h?c.has(f)?h=c.get(f):
(h=""+ ++n,c.set(f,h)):h="p_"+f;var k=g.data_[h];if(k&&$jscomp.owns(g.data_,h))for(g=0;g<k.length;g++){var p=k[g];if(f!==f&&p.key!==p.key||f===p.key)return{id:h,list:k,index:g,entry:p}}return{id:h,list:k,index:-1,entry:void 0}},m=function(g,f){var h=g.head_;return $jscomp.iteratorPrototype(function(){if(h){for(;h.head!=g.head_;)h=h.previous;for(;h.next!=h.head;)return h=h.next,{done:!1,value:f(h)};h=null}return{done:!0,value:void 0}})},l=function(){var g={};return g.previous=g.next=g.head=g},n=0;
return d},"es6","es3");
$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),e=new a($jscomp.makeIterator([d]));if(!e.has(d)||1!=e.size||e.add(d)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var m=e.entries(),l=m.next();if(l.done||l.value[0]!=d||l.value[1]!=d)return!1;l=m.next();return l.done||l.value[0]==d||4!=l.value[0].x||l.value[1]!=l.value[0]?!1:m.next().done}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=function(d){this.map_=new Map;if(d){d=$jscomp.makeIterator(d);for(var e;!(e=d.next()).done;)this.add(e.value)}this.size=this.map_.size};c.prototype.add=function(d){d=0===d?0:d;this.map_.set(d,d);this.size=this.map_.size;return this};c.prototype.delete=function(d){d=this.map_.delete(d);this.size=this.map_.size;return d};c.prototype.clear=function(){this.map_.clear();this.size=0};c.prototype.has=
function(d){return this.map_.has(d)};c.prototype.entries=function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(d,e){var m=this;this.map_.forEach(function(l){return d.call(e,l,l,m)})};return c},"es6","es3");
$jscomp.polyfill("Array.prototype.flat",function(a){return a?a:function(b){b=void 0===b?1:b;for(var c=[],d=0;d<this.length;d++){var e=this[d];Array.isArray(e)&&0<b?(e=Array.prototype.flat.call(e,b-1),c.push.apply(c,e)):c.push(e)}return c}},"es9","es5");
var listPage={initializeEditListModal:function(){var a=document.getElementById("edit-list-modal");listPage.editListModal=M.Modal.init(a,{onOpenEnd:function(){var b=document.getElementById("list-name-input");b.focus();b.selectionStart=b.selectionEnd=b.value.length}})},initializeAddAlbumModal:function(){var a=document.getElementById("add-album-modal");listPage.addAlbumModal=M.Modal.init(a,{onOpenEnd:function(){document.getElementById("add-album-input").focus()}})},closeModalOnClickAway:function(a){a.target.classList.contains("modal-overlay")&&
(listPage.tagFilterModal.close(),listPage.artistFilterModal.close(),listPage.yearFilterModal.close(),listPage.clearArtistFilterInput(),listPage.clearTagFilterInput())},closeToast:function(){var a=document.querySelector(".toast");M.Toast.getInstance(a).dismiss()},closeToastsOnClick:function(a){((a=a.target.parentNode)&&a.classList&&a.classList.contains("toast")||a&&"toast-container"==a.id)&&listPage.closeToast()},initializeMainFloatingActionButton:function(){var a=document.getElementById("lists-fab-button");
listPage.mainFloatingActionButton=M.FloatingActionButton.init(a,{direction:"top",hoverEnabled:!1})},closeFloatingActionButtonWhenClickAway:function(a){["show-buttons","add-lists","edit-lists","remove-album","filter-fab"].includes(a.target.parentNode.id)||listPage.mainFloatingActionButton.close()},showFilterMenu:function(){setTimeout(function(){document.getElementById("bottom-filters").classList.remove("hide")},150)},closeFilterMenu:function(){document.getElementById("bottom-filters").classList.add("hide")},
clearAllFilters:function(){listVueApp.yearFilters=[];listVueApp.artistFilters=[];listVueApp.tagFilters=[];listVueApp.resetSelectedAlbums();listPage.filterAll();listPage.hilightSelectedArtistFilters();listPage.hilightSelectedTagFilters();listPage.hilightSelectedYearFilters();M.toast({html:"All filters cleared",displayLength:2500})},initializeYearFilterModal:function(){var a=document.getElementById("year-filter-modal");listPage.yearFilterModal=M.Modal.init(a,{onCloseStart:function(){listVueApp.resetSelectedAlbums();
listPage.filterAll()}})},initializeArtistFitlerModal:function(){var a=document.getElementById("artist-filter-modal");listPage.artistFilterModal=M.Modal.init(a,{onCloseStart:function(){listVueApp.resetSelectedAlbums();listPage.filterAll()}})},initializeTagFilterModal:function(){var a=document.getElementById("tag-filter-modal");listPage.tagFilterModal=M.Modal.init(a,{onCloseStart:function(){listVueApp.resetSelectedAlbums();listPage.filterAll()}})},hideRemoveAlbumButtons:function(){listPage.showRemoveAlbum=
!1;hideClass("delete-button")},toggleRemoveAlbumButtons:function(){listPage.showRemoveAlbum?listPage.hideRemoveAlbumButtons():(listPage.showRemoveAlbum=!0,showClass("delete-button"),M.toast({html:"\n        <span>\n          Click the <i class='small material-icons' style='vertical-align:middle;'>highlight_off</i> to remove an album from the list\n        </span>\n      ",displayLength:2500}))},addAlbumToList:function(a){var b=parseInt(window.location.pathname.replace("/lists/","")),c=new XMLHttpRequest;
c.onreadystatechange=function(){if(4===c.readyState)if(200<=c.status&&300>c.status){var d=JSON.parse(c.responseText);listVueApp.albums.push(d.added_album);listPage.showRemoveAlbum=!0;listPage.toggleRemoveAlbumButtons();setTimeout(function(){listVueApp.resetSelectedAlbums();listPage.filterAll()},5);listPage.addAlbumModal.close()}else M.toast({html:c.responseText.replace(/"/g,"")})};c.open("PATCH","/lists/"+b);c.setRequestHeader("Content-Type","application/json");c.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);
c.send(JSON.stringify({action:"add_album",currentAlbum:a}))},removeAlbumFromList:function(a){if(confirm("Are you sure you want to remove the album from this list? You cannot undo this operation.")){var b=parseInt(window.location.pathname.replace("/lists/","")),c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState)if(200<=c.status&&300>c.status){var d=listVueApp.albums.findIndex(function(e){return e.id==a});listVueApp.albums.splice(d,1);setTimeout(function(){listVueApp.resetSelectedAlbums();
listPage.filterAll();0==listVueApp.selectedAlbums.length&&(listVueApp.yearFilters=[],listVueApp.artistFilters=[],listVueApp.tagFilters=[],listVueApp.resetSelectedAlbums(),listPage.filterAll())},5);M.toast({html:c.responseText.replace(/"/g,"")})}else M.toast({html:"Unable to remove album from list"})};c.open("PATCH","/lists/"+b);c.setRequestHeader("Content-Type","application/json");c.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);c.send(JSON.stringify({action:"remove_album",albumID:a}))}},updateListTitle:function(){var a=
parseInt(window.location.pathname.replace("/lists/","")),b=document.getElementById("list-name-input").value.trim(),c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState)if(200<=c.status&&300>c.status){var d=JSON.parse(c.responseText);listVueApp.listTitle=d.list_title;listPage.editListModal.close();M.toast({html:d.message})}else M.toast({html:c.responseText.replace(/"/g,"")})};c.open("PATCH","/lists/"+a);c.setRequestHeader("Content-Type","application/json");c.setRequestHeader("X-CSRF-Token",
CSRF_TOKEN);c.send(JSON.stringify({action:"update_title",newTitle:b}))},searchForAlbumsToAddToList:function(){removeSelectedElement(".album-search-album");document.getElementById("add-album-search-results").style.display="inline-flex";removeSelectedElement("#add-album-search-result-warning");listPage.showAlbumSearchSpinner();var a=document.getElementById("add-album-input").value.trim(),b=new XMLHttpRequest;b.onreadystatechange=function(){4===b.readyState&&(200<=b.status&&300>b.status?listPage.displayAlbumSearchResults(JSON.parse(b.responseText)):
(listPage.hideAlbumSearchSpinner(),console.log("error",b)))};b.open("GET","/api/apple/search/?search_string="+a+"&offset=0");b.send()},showAlbumSearchSpinner:function(){listPage.albumSearchSpinner.classList.remove("hide")},hideAlbumSearchSpinner:function(){listPage.albumSearchSpinner.classList.contains("hide")||listPage.albumSearchSpinner.classList.add("hide")},displayAlbumSearchResults:function(a){var b=document.getElementById("add-album-search-results");1>a.albums.length&&(listPage.hideAlbumSearchSpinner(),
b.appendChild(stringToNode('<div id="add-album-search-result-warning" class="center-align">\n          <em class="grey-text text-darken-1">\n            No albums match your search! Try another artist or album.\n          </em>\n        </div>')),document.getElementById("add-album-search-results").style.display="block");listPage.hideAlbumSearchSpinner();document.getElementById("add-album-search-results").style.display="inline-flex";for(var c=0;c<a.albums.length;c++){var d=a.albums[c],e=d.cover.replace("{w}",
"230").replace("{h}","230");b.appendChild(stringToNode('<div class="album-search-album" onclick="listPage.addAlbumToList('+d.appleAlbumID+')">\n          <img class="search-album-cover" src="'+e+'">\n          <p class="search-title">'+d.title+'</p>\n          <p class="search-artist grey-text text-darken-1">'+d.artist+"</p>\n        </div>"))}},selectChip:function(a){a.classList.add("light-blue");a.classList.add("accent-4");a.classList.add("white-text")},deselectChip:function(a){a.classList.remove("light-blue");
a.classList.remove("accent-4");a.classList.remove("white-text")},toggleChipSelect:function(a){a.classList.toggle("light-blue");a.classList.toggle("accent-4");a.classList.toggle("white-text")},selectYearFilter:function(a){listPage.toggleChipSelect(a.target);var b=listVueApp.yearFilters.indexOf(a.target.dataset.year);-1==b?listVueApp.yearFilters.push(a.target.dataset.year):listVueApp.yearFilters.splice(b,1)},selectArtistFilter:function(a){listPage.toggleChipSelect(a.target);var b=listVueApp.artistFilters.indexOf(a.target.dataset.artist);
-1==b?(listVueApp.artistFilters.push(a.target.dataset.artist),document.getElementById("artist-filter-input")&&(a=document.getElementById("artist-filter-input").value.trim(),a=listVueApp.artistFilters.indexOf(a),-1!=a&&listVueApp.artistFilters.splice(a,1))):listVueApp.artistFilters.splice(b,1);listPage.clearArtistFilterInput()},selectTagFilter:function(a){listPage.toggleChipSelect(a.target);listPage.clearTagFilterInput();var b=listVueApp.tagFilters.indexOf(a.target.dataset.tag);-1==b?listVueApp.tagFilters.push(a.target.dataset.tag):
listVueApp.tagFilters.splice(b,1);listVueApp.resetSelectedAlbums();listPage.filterAll();setTimeout(function(){listPage.hilightSelectedTagFilters()},10)},removeFilter:function(a){var b=a.target.dataset.filter;switch(a.target.dataset.type){case "year":a=listVueApp.yearFilters.indexOf(b);listVueApp.yearFilters.splice(a,1);break;case "artist":a=listVueApp.artistFilters.indexOf(b);listVueApp.artistFilters.splice(a,1);break;case "tag":a=listVueApp.tagFilters.indexOf(b),listVueApp.tagFilters.splice(a,1)}listVueApp.resetSelectedAlbums();
listPage.filterAll()},hilightSelectedTagFilters:function(){for(var a=document.getElementsByClassName("tag-filter"),b=listVueApp.tagFilters,c=0;c<a.length;c++){var d=a[c];b.includes(d.dataset.tag)?listPage.selectChip(d):listPage.deselectChip(d)}},hilightSelectedArtistFilters:function(){for(var a=document.getElementsByClassName("artist-filter"),b=listVueApp.artistFilters,c=0;c<a.length;c++){var d=a[c];b.includes(d.dataset.artist)?listPage.selectChip(d):listPage.deselectChip(d)}},hilightSelectedYearFilters:function(){for(var a=
document.getElementsByClassName("year-filter"),b=listVueApp.yearFilters,c=0;c<a.length;c++){var d=a[c];b.includes(d.dataset.year)?listPage.selectChip(d):listPage.deselectChip(d)}},filterYears:function(){0!==listVueApp.yearFilters.length&&(listVueApp.selectedAlbums=listVueApp.selectedAlbums.filter(function(a){return listVueApp.yearFilters.includes(a.release_date.substr(0,4))}))},filterArtists:function(){0!==listVueApp.artistFilters.length&&(listVueApp.selectedAlbums=listVueApp.selectedAlbums.filter(function(a){return 0<
listVueApp.artistFilters.filter(function(b){return a.artist.toUpperCase().includes(b.toUpperCase())}).length}))},filterTags:function(){0!==listVueApp.tagFilters.length&&(listVueApp.selectedAlbums=listVueApp.selectedAlbums.filter(function(a){return listVueApp.tagFilters.every(function(b){return 0<a.tags.map(function(c){return c.text}).filter(function(c){return c.toUpperCase().includes(b.toUpperCase())}).length})}))},clearSpecificFilter:function(a){switch(a.target.dataset.type){case "year":listVueApp.yearFilters=
[];M.toast({html:"Year filters cleared",displayLength:2500});break;case "artist":listVueApp.artistFilters=[];listPage.clearArtistFilterInput();M.toast({html:"Artist filters cleared",displayLength:2500});break;case "tag":listVueApp.tagFilters=[],listPage.clearTagFilterInput(),M.toast({html:"Tag filters cleared",displayLength:2500})}listVueApp.resetSelectedAlbums();listPage.filterAll();listPage.hilightSelectedArtistFilters();listPage.hilightSelectedTagFilters();listPage.hilightSelectedYearFilters()},
filterAll:function(){listPage.filterYears();listPage.filterArtists();listPage.filterTags();listPage.hideRemoveAlbumButtons()},clearTagFilterInput:function(){document.getElementById("tag-filter-input")&&(document.getElementById("tag-filter-input").value="")},clearArtistFilterInput:function(){document.getElementById("artist-filter-input")&&(document.getElementById("artist-filter-input").value="")},setURIparams:function(a,b){var c=new URL(document.location);if(0===b.length)return c.searchParams.delete(a),
history.replaceState({},"",c);b=encodeURIComponent(b.join(",,"));c.searchParams.set(a,b);history.replaceState({},"",c)},getURIparam:function(a){return(a=(new URL(document.location)).searchParams.get(a))?decodeURIComponent(a).split(",,"):[]},addNoAlbumMessage:function(){document.getElementById("list-container").parentNode.appendChild(stringToNode('<div id="no-albums-message" class="center-align" style="padding:40px 15px">\n        <em class="grey-text">Looks like you haven\'t added any albums to this list! Click the floating action button in the bottom right corner of the screen to add an album.</em>\n      </div>'))},
removeNoAlbumsMessage:function(){removeSelectedElement("#no-albums-message")}},listVueApp=new Vue({el:"#listVueApp",data:{albums:allAlbums,selectedAlbums:[],listUserID:listUserID,yearFilters:[],artistFilters:[],tagFilters:[],listTitle:listTitle,titleTags:tagSearchTags},methods:{albumCover:function(a,b){return a.cover.replace("{w}",b).replace("{h}",b)},removeAlbum:function(a){listPage.removeAlbumFromList(a)},resetSelectedAlbums:function(){var a=this,b=JSON.parse(JSON.stringify(this.albums));if(listUserID)for(var c=
0;c<b.length;c++){var d=b[c];d.tags=d.tags.filter(function(e){return e.user_id==a.listUserID})}this.selectedAlbums=b.sort(function(e,m){return e.release_date<m.release_date?1:e.release_date>m.release_date?-1:0})}},computed:{selectedAlbumsCount:function(){return this.selectedAlbums.length},artists:function(){return Array.from(new Set(this.selectedAlbums.slice().map(function(a){return a.artist}).sort(function(a,b){a=a.toUpperCase();b=b.toUpperCase();return a<b?-1:a>b?1:0})))},years:function(){return Array.from(new Set(this.selectedAlbums.slice().map(function(a){return a.release_date.substr(0,
4)})))},tags:function(){return Array.from(new Set(this.selectedAlbums.slice().map(function(a){return a.tags.map(function(b){return b.text})}).flat().sort()))},allFilters:function(){return this.yearFilters.concat(this.artistFilters).concat(this.tagFilters)}},watch:{albums:function(){0===this.albums.length?listPage.addNoAlbumMessage():listPage.removeNoAlbumsMessage();this.resetSelectedAlbums()},yearFilters:function(a){listPage.setURIparams("years",a)},tagFilters:function(a){listPage.setURIparams("tags",
a)},artistFilters:function(a){listPage.setURIparams("artists",a)}},beforeMount:function(){this.resetSelectedAlbums()},mounted:function(){var a=document.getElementById("htm-title");a.parentNode.removeChild(a);this.artistFilters=listPage.getURIparam("artists");this.yearFilters=listPage.getURIparam("years");this.tagFilters=listPage.getURIparam("tags");document.addEventListener("DOMContentLoaded",listPage.filterAll);0===this.albums.length&&listPage.addNoAlbumMessage()}});
document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("remove-album")){var a=document.getElementById("edit-list"),b=document.getElementById("add-album"),c=document.getElementById("remove-album"),d=document.getElementById("clear-list-name-input-btn"),e=document.getElementById("clear-add-album-input-btn"),m=document.getElementById("list-name-input"),l=document.getElementById("add-album-input");listPage.listNameInput=document.getElementById("list-name-input");listPage.albumInput=
document.getElementById("add-album-input");listPage.albumSearchSpinner=document.getElementById("add-album-search-spinner-container");listPage.initializeEditListModal();listPage.initializeAddAlbumModal();c.addEventListener("click",listPage.toggleRemoveAlbumButtons);a.addEventListener("click",function(){listPage.editListModal.open()});b.addEventListener("click",function(){listPage.addAlbumModal.open()});d.addEventListener("click",function(){listNameInput.value="";listNameInput.focus()});e.addEventListener("click",
function(){listPage.albumInput.value="";listPage.albumInput.focus()});m.addEventListener("keyup",function(k){13===k.keyCode&&listPage.updateListTitle()});l.addEventListener("keydown",function(k){13==k.keyCode&&listPage.searchForAlbumsToAddToList()})}a=document.getElementById("show-filters");b=document.getElementById("close-filter-menu");c=document.getElementById("clear-all-filters");d=document.getElementById("open-sidenav");e=document.getElementById("year-filter-btn");m=document.getElementById("artist-filter-btn");
l=document.getElementById("tag-filter-btn");var n=document.getElementById("tag-filter-input"),g=document.getElementById("toggle-filter-tag-input-btn"),f=document.getElementById("artist-filter-input"),h=document.getElementById("toggle-filter-artist-input-btn");listPage.showRemoveAlbum=!1;listPage.initializeMainFloatingActionButton();listPage.initializeYearFilterModal();listPage.initializeArtistFitlerModal();listPage.initializeTagFilterModal();a.addEventListener("click",listPage.showFilterMenu);b.addEventListener("click",
listPage.closeFilterMenu);c.addEventListener("click",listPage.clearAllFilters);d.addEventListener("click",listPage.closeFilterMenu);g.addEventListener("click",function(){n.classList.toggle("hide");listPage.clearTagFilterInput()});n.addEventListener("keyup",function(k){k=k.target.value.trim().replace(/\b\w+/g,function(p){return p.charAt(0).toUpperCase()+p.substr(1).toLowerCase()});listVueApp.tagFilters=0<k.length?[k]:[];listVueApp.resetSelectedAlbums();listPage.filterAll();setTimeout(function(){listPage.hilightSelectedTagFilters()},
100)});h.addEventListener("click",function(){f.classList.toggle("hide");listPage.clearArtistFilterInput()});f.addEventListener("keyup",function(k){k=k.target.value.trim();listVueApp.artistFilters=0<k.length?[k]:[];listVueApp.resetSelectedAlbums();listPage.filterAll();setTimeout(function(){listPage.hilightSelectedArtistFilters()},100)});e.addEventListener("click",function(){listPage.hilightSelectedYearFilters();listPage.yearFilterModal.open()});m.addEventListener("click",function(){listPage.hilightSelectedArtistFilters();
listPage.artistFilterModal.open()});l.addEventListener("click",function(){listPage.hilightSelectedTagFilters();listPage.tagFilterModal.open()});document.addEventListener("click",function(k){listPage.closeToastsOnClick(k)});document.addEventListener("click",function(k){k.target.parentNode&&listPage.closeFloatingActionButtonWhenClickAway(k)},{passive:!0});document.addEventListener("scroll",function(){setTimeout(function(){listPage.closeFilterMenu()},50)},{passive:!0});document.addEventListener("click",
function(k){listPage.closeModalOnClickAway(k)},{passive:!0});addEventListenerToClass("clear-filters","click",function(k){listPage.clearSpecificFilter(k)});addEventListenerToClass("filter-btn","click",function(k){listPage.yearFilterModal.close();listPage.artistFilterModal.close();listPage.tagFilterModal.close()})});function showClass(a){a=document.getElementsByClassName(a);for(var b=0;b<a.length;b++)a[b].classList.remove("hide")}
function hideClass(a){a=document.getElementsByClassName(a);for(var b=0;b<a.length;b++)a[b].classList.add("hide")}function addEventListenerToClass(a,b,c){a=document.getElementsByClassName(a);for(var d=0;d<a.length;d++)a[d].addEventListener(b,c)};
