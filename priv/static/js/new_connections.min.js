var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};
var connectionsPage={closeToast:function(){var a=document.querySelector(".toast");M.Toast.getInstance(a).dismiss()},closeToastsOnClick:function(a){a=a.target.parentNode;(a.classList&&a.classList.contains("toast")||"toast-container"==a.id)&&connectionsPage.closeToast()},hideSpinner:function(){connectionsPage.spinner.classList.contains("hide")||connectionsPage.spinner.classList.add("hide")},showSpinner:function(){connectionsPage.spinner.classList.remove("hide")},executeAlbumSearch:function(){removeSelectedElement(".album");
removeSelectedElement("#warning");connectionsPage.showSpinner();var a=connectionsPage.searchInput.value.trim(),b=new XMLHttpRequest;b.onreadystatechange=function(){4===b.readyState&&(200<=b.status&&300>b.status?connectionsPage.displaySearchResults(JSON.parse(b.responseText)):(connectionsPage.hideSpinner(),console.log("error",b)))};b.open("GET","/api/apple/search/?search_string="+a+"&offset=0");b.send()},clearSearchInput:function(){connectionsPage.searchInput.value="";connectionsPage.searchInput.focus()},
displaySearchResults:function(a){var b=document.getElementById("connection-search-results");if(1>a.albums.length)return connectionsPage.hideSpinner(),b.appendChild(stringToNode('<div id="warning" style="width:100%;margin-top:25px;" class="center-align">\n          <em class="grey-text text-darken-1">\n            No albums match your search! Try another artist or album.\n          </em>\n        </div>'));connectionsPage.hideSpinner();for(var c=0;c<a.albums.length;c++){var d=a.albums[c],e=d.cover.replace("{w}",
"200").replace("{h}","200");b.appendChild(stringToNode('<div class="album" onclick="connectionsPage.addConnection('+d.appleAlbumID+')">\n          <img class="responsive-img album-cover" src="'+e+'">\n          <p class="title">'+d.title+'</p>\n          <p class="artist grey-text text-darken-1">'+d.artist+"</p>\n        </div>"))}},addConnection:function(a){var b=parseInt((new URLSearchParams(window.location.search)).get("parent_album")),c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===
c.readyState)if(200<=c.status&&300>c.status){var d=JSON.parse(c.responseText).message;M.toast({html:d})}else d=JSON.parse(c.responseText).message,M.toast({html:d})};c.open("POST","/connections");c.setRequestHeader("Content-Type","application/json");c.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);c.send(JSON.stringify({parentAlbum:b,childAlbum:a}))}};function addEventListenerToClass(a,b,c){a=document.getElementsByClassName(a);for(var d=0;d<a.length;d++)a[d].addEventListener(b,c)}
document.addEventListener("DOMContentLoaded",function(){connectionsPage.spinner=document.getElementById("spinner-container");connectionsPage.searchInput=document.getElementById("connection-search-input");connectionsPage.clearSearchInputBtn=document.getElementById("clear-search-input-btn");connectionsPage.searchInput.focus();connectionsPage.searchInput.addEventListener("keydown",function(a){13==a.keyCode&&connectionsPage.executeAlbumSearch()},{passive:!0});connectionsPage.clearSearchInputBtn.addEventListener("click",
connectionsPage.clearSearchInput);document.addEventListener("click",function(a){connectionsPage.closeToastsOnClick(a)},{passive:!0})},{passive:!0});
