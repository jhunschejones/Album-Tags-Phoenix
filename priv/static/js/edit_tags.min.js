var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,d){a instanceof String&&(a=String(a));for(var b=a.length,e=0;e<b;e++){var f=a[e];if(c.call(d,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,d,b){if(c){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var e=a[b];e in d||(d[e]={});d=d[e]}a=a[a.length-1];b=d[a];c=c(b);c!=b&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).i}},"es6","es3");
(function(){var a={closeToast:function(){var a=document.querySelector(".toast");M.Toast.getInstance(a).dismiss()},closeToastsOnClick:function(c){c=c.target.parentNode;(c.classList&&c.classList.contains("toast")||"toast-container"==c.id)&&a.closeToast()},initializeChips:function(){var c=document.querySelectorAll(".chips");a.chipsInstance=M.Chips.init(c,{placeholder:"Add your first tag...",secondaryPlaceholder:"Add another tag...",data:currentTags.slice(0),onChipAdd:function(c,b){c=b.innerText.substr(0,
b.innerText.lastIndexOf("close")).trim();a.postNewTag(c)},onChipDelete:function(c,b){c=b.innerText.substr(0,b.innerText.lastIndexOf("close")).trim();confirm("Are you sure you want to delete the '"+c+"' tag? You cannot undo this operation.")?a.deleteTag(c):a.initializeChips()}})[0]},postNewTag:function(c){var d=parseInt(window.location.pathname.replace("/tags/","").replace("/edit","")),b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState){if(200<=b.status&&300>b.status){var d=JSON.parse(b.responseText).tag_id;
tagArray.push({tag_id:d,text:c});currentTags=a.chipsInstance.chipsData.slice(0)}else d=JSON.parse(b.responseText).message,M.toast({html:d}),a.initializeChips();a.tagInput.focus()}};b.open("POST","/tags");b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);b.send(JSON.stringify({tag:c,album:d,customGenre:!1}))},deleteTag:function(c){var d=tagArray.find(function(a){return a.text===c}).tag_id,b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===
b.readyState){if(200<=b.status&&300>b.status){var d=tagArray.findIndex(function(a){return a.text===c});tagArray.splice(d,1);currentTags=a.chipsInstance.chipsData.slice(0)}else M.toast({html:"Unable to delete tag"});a.tagInput.focus()}};b.open("DELETE","/tags/"+d);b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);b.send(JSON.stringify({albumID:albumID}))}};document.addEventListener("DOMContentLoaded",function(){a.initializeChips();a.tagInput=document.getElementById("tag-input");
a.tagInput.focus();document.addEventListener("click",function(c){a.closeToastsOnClick(c)})})})();
