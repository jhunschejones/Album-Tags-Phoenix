var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var c=a.length,e=0;e<c;e++){var f=a[e];if(d.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,c){if(d){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];e in b||(b[e]={});b=b[e]}a=a[a.length-1];c=b[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).i}},"es6","es3");document.addEventListener("click",function(a){a=a.target.parentNode;(a.classList&&a.classList.contains("toast")||"toast-container"==a.id)&&closeToast()});function closeToast(){var a=document.querySelector(".toast");M.Toast.getInstance(a).dismiss()}document.addEventListener("DOMContentLoaded",function(){initializeChips();document.getElementById("tag-input").focus()});
function initializeChips(){var a=document.querySelectorAll(".chips");window.instances=M.Chips.init(a,{placeholder:"Add your first tag...",secondaryPlaceholder:"Add another tag...",data:currentTags.slice(0),onChipAdd:function(a,b){a=b.innerText.substr(0,b.innerText.lastIndexOf("close")).trim();postNewTag(a)},onChipDelete:function(a,b){a=b.innerText.substr(0,b.innerText.lastIndexOf("close")).trim();confirm("Are you sure you want to delete the '"+a+"' tag? You cannot undo this operation.")?deleteTag(a):
initializeChips()}})}
function postNewTag(a){var d=parseInt(window.location.pathname.replace("/tags/","").replace("/edit","")),b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status){var c=JSON.parse(b.responseText).tag_id;tagArray.push({tag_id:c,text:a});currentTags=window.instances[0].chipsData.slice(0)}else c=JSON.parse(b.responseText).message,M.toast({html:c}),initializeChips()};b.open("POST","/tags");b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("X-CSRF-Token",
CSRF_TOKEN);b.send(JSON.stringify({tag:a,album:d,customGenre:!1}))}
function deleteTag(a){var d=tagArray.find(function(b){return b.text===a}).tag_id,b=new XMLHttpRequest;b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status){var c=tagArray.findIndex(function(b){return b.text===a});tagArray.splice(c,1);currentTags=window.instances[0].chipsData.slice(0)}else M.toast({html:"Unable to delete tag"})};b.open("DELETE","/tags/"+d);b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);b.send(JSON.stringify({albumID:albumID}))}
;
