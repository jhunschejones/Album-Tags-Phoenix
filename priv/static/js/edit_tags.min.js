var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var c=a.length,e=0;e<c;e++){var f=a[e];if(b.call(d,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var d=$jscomp.propertyToPolyfillSymbol[b];if(null==d)return a[b];d=a[d];return void 0!==d?d:a[b]};$jscomp.polyfill=function(a,b,d,c){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,d,c):$jscomp.polyfillUnisolated(a,b,d,c))};
$jscomp.polyfillUnisolated=function(a,b,d,c){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))return;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,d,c){var e=a.split(".");a=1===e.length;c=e[0];c=!a&&c in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in c))return;c=c[g]}e=e[e.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?c[e]:null;b=b(d);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==d&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(c,e,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6","es3");$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,d){return $jscomp.findInternal(this,b,d).i}},"es6","es3");
(function(){var a={closeToast:function(){var b=document.querySelector(".toast");M.Toast.getInstance(b).dismiss()},closeToastsOnClick:function(b){b=b.target.parentNode;(b.classList&&b.classList.contains("toast")||"toast-container"==b.id)&&a.closeToast()},initializeChips:function(){var b=document.querySelectorAll(".chips");a.chipsInstance=M.Chips.init(b,{placeholder:"Add your first tag...",secondaryPlaceholder:"Add another tag...",data:currentTags.slice(0),onChipAdd:function(d,c){d=c.innerText.substr(0,
c.innerText.lastIndexOf("close")).trim();a.postNewTag(d)},onChipDelete:function(d,c){d=c.innerText.substr(0,c.innerText.lastIndexOf("close")).trim();confirm("Are you sure you want to delete the '"+d+"' tag? You cannot undo this operation.")?a.deleteTag(d):a.initializeChips()}})[0]},postNewTag:function(b){var d=parseInt(window.location.pathname.replace("/tags/","").replace("/edit","")),c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState){if(200<=c.status&&300>c.status){var e=JSON.parse(c.responseText).tag_id;
tagArray.push({tag_id:e,text:b});currentTags=a.chipsInstance.chipsData.slice(0)}else e=JSON.parse(c.responseText).message,M.toast({html:e}),a.initializeChips();a.tagInput.focus()}};c.open("POST","/tags");c.setRequestHeader("Content-Type","application/json");c.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);c.send(JSON.stringify({tag:b,album:d,customGenre:!1}))},deleteTag:function(b){var d=tagArray.find(function(e){return e.text===b}).tag_id,c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===
c.readyState){if(200<=c.status&&300>c.status){var e=tagArray.findIndex(function(f){return f.text===b});tagArray.splice(e,1);currentTags=a.chipsInstance.chipsData.slice(0)}else M.toast({html:"Unable to delete tag"});a.tagInput.focus()}};c.open("DELETE","/tags/"+d);c.setRequestHeader("Content-Type","application/json");c.setRequestHeader("X-CSRF-Token",CSRF_TOKEN);c.send(JSON.stringify({albumID:albumID}))}};document.addEventListener("DOMContentLoaded",function(){a.initializeChips();a.tagInput=document.getElementById("tag-input");
a.tagInput.focus();document.addEventListener("click",function(b){a.closeToastsOnClick(b)})})})();
